(this.webpackJsonpreactsweeper=this.webpackJsonpreactsweeper||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n(0),s=n.n(c),a=n(15),r=n.n(a),u=(n(32),n(10)),l=(n(33),function(){return Object(i.jsx)("div",{className:"logo",children:Object(i.jsx)(u.b,{to:"/",children:"ReactSweeper"})})}),o=(n(38),function(){return Object(i.jsx)("nav",{className:"nav",children:Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:Object(i.jsx)(u.b,{to:"/",children:"Home"})}),Object(i.jsx)("li",{children:Object(i.jsx)(u.b,{to:"/about",children:"About"})})]})})}),d=(n(39),function(){return Object(i.jsxs)("header",{className:"header",children:[Object(i.jsx)(l,{}),Object(i.jsx)(o,{})]})}),j=n(4),b=function(){return Object(i.jsx)("div",{className:"about-page",children:"AboutPage"})},h=n(9),m=(n(41),function(e){var t={backgroundPositionX:-13*e.display};return Object(i.jsx)("div",{className:"digit",style:t})}),f=(n(42),function(e){var t=e.display.toString().padStart(3,"0").split("");return Object(i.jsx)("div",{className:"number-display bevel-down",children:t.map((function(e,t){return Object(i.jsx)(m,{display:Number(e)},t)}))})}),O=n(18),v=n(3),g=n(19),x={beginner:{width:9,height:9,numMines:10},intermediate:{width:9,height:9,numMines:10},boss:{width:9,height:9,numMines:10}},w={states:{untouched:"UNTOUCHED",flagged:"FLAGGED",unknown:"UNKNOWN",checked:"CHECKED",exploded:"EXPLODED"}},p=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.game}));function n(e){var t=0,n=0,i=0;return e.forEach((function(e){e.state===w.states.flagged&&e.isMine&&t++,e.isMine&&n++,e.state===w.states.checked&&i++})),console.log({numMines:n,numMinesFlagged:t,numChecked:i}),n===t||e.length-n===i}var i=Object(c.useCallback)((function(t){console.log("init game cb");var n=x[t],i=Array(n.numMines).fill({isMine:!0}),c=Array(n.width*n.height-n.numMines).fill({isMine:!1}),s=[].concat(Object(g.a)(i),Object(g.a)(c)).sort((function(){return Math.random()-.5})),a=s.map((function(e,t){var i,c,a,r,u,l,o,d,j=t<n.width,b=t>0&&(t+1)%n.width===0,h=t>=(n.width-1)*n.height,m=t%n.width===0,f=t-n.width,O=t-n.width+1,g=t+1,x=t+n.width+1,p=t+n.width,M=t+n.width-1,y=t-1,G=t-n.width-1,k=0;return!j&&(null===(i=s[f])||void 0===i?void 0:i.isMine)&&k++,j||b||!(null===(c=s[O])||void 0===c?void 0:c.isMine)||k++,!b&&(null===(a=s[g])||void 0===a?void 0:a.isMine)&&k++,b||h||!(null===(r=s[x])||void 0===r?void 0:r.isMine)||k++,!h&&(null===(u=s[p])||void 0===u?void 0:u.isMine)&&k++,h||m||!(null===(l=s[M])||void 0===l?void 0:l.isMine)||k++,!m&&(null===(o=s[y])||void 0===o?void 0:o.isMine)&&k++,j||m||!(null===(d=s[G])||void 0===d?void 0:d.isMine)||k++,Object(v.a)(Object(v.a)({},e),{},{count:k,id:t,state:w.states.untouched})}));console.log({cells:a});var r={type:"init.game",height:n.height,numMines:n.numMines,numMinesRemaining:n.numMines,width:n.width,cells:a,difficultyLevel:t};e(r)}),[e]),s=Object(c.useCallback)((function(n){var i=t.cells.map((function(e){return e.state===w.states.flagged?e:Object(v.a)(Object(v.a)({},e),{},{state:n.id===e.id?w.states.exploded:w.states.checked})}));console.log({gameOverCells:i}),e({type:"game.over",cells:i})}),[e,t]),a=Object(c.useCallback)((function(i){if(!t.isGameActive&&!t.isGameOver){e({type:"game.start"})}var c=Object(g.a)(t.cells),a=u(i),r=n(c);(n(c),a)||e({type:"update.cells",cells:c});if(r){e({type:"game.won"})}function u(e){return e.state!==w.states.checked&&(e.isMine?(console.error(" BOOM! "),s(e),!0):!!t.isGameOver||e.state!==w.states.flagged&&e.state!==w.states.unknown&&(c=c.map((function(t){return t.id===e.id?Object(v.a)(Object(v.a)({},t),{},{state:w.states.checked}):t})),void(0===e.count&&function(e){var n=e.id<t.width,i=e.id>0&&(e.id+1)%t.width===0,s=e.id>=(t.width-1)*t.height,a=e.id%t.width===0,r=e.id-t.width,l=e.id-t.width+1,o=e.id+1,d=e.id+t.width+1,j=e.id+t.width,b=e.id+t.width-1,h=e.id-1,m=e.id-t.width-1;n||u(c[r]);n||i||u(c[l]);i||u(c[o]);i||s||u(c[d]);s||u(c[j]);s||a||u(c[b]);a||u(c[h]);a||n||u(c[m])}(e))))}}),[e,t,s]),r=Object(c.useCallback)((function(e,t){return t-e.reduce((function(e,t){return t.state===w.states.flagged?e+1:e}),0)}),[]),u=Object(c.useCallback)((function(i){var c=i.state,s=r(t.cells,t.numMines);switch(i.state){case w.states.untouched:if(0===s)return;c=w.states.flagged;break;case w.states.flagged:c=w.states.unknown;break;case w.states.unknown:c=w.states.untouched}if(n(t.cells.map((function(e){return e.id===i.id?Object(v.a)(Object(v.a)({},e),{},{state:c}):e})))){e({type:"game.won"})}var a={type:"check.cell",cellId:i.id,state:c};e(a)}),[e,t,r]);return{initGameCB:i,gameOverCB:s,checkCellCB:a,setFlagStateCB:u,getNumMinesRemainingCB:r}},M=(n(43),"up"),y="down",G="exploded",k="win",N=function(e){var t=e.difficultyLevel,n=e.isGameOver,s=e.isGameWon,a=Object(c.useState)(M),r=Object(O.a)(a,2),u=r[0],l=r[1],o=p().initGameCB;Object(c.useEffect)((function(){n&&!s?l(G):s&&l(k)}),[n,s]);return Object(i.jsx)("div",{className:"smiley ".concat(u),onMouseDown:function(){l(y)},onMouseUp:function(){l(M),o(t)}})},C=function(e){var t=e.isGameActive,n=Object(c.useState)(0),s=Object(O.a)(n,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){var e=null;return t?e=setInterval((function(){r((function(e){return e+1}))}),1e3):(clearInterval(e),r(0)),function(){return clearInterval(e)}}),[t]),Object(i.jsx)(f,{display:a})},E=(n(44),function(e){var t=e.game,n=e.numMinesRemaining;return Object(i.jsxs)("div",{className:"game-head bevel-down",children:[Object(i.jsx)(f,{display:n}),Object(i.jsx)(N,{isGameOver:t.isGameOver,difficultyLevel:t.difficultyLevel,isGameWon:t.isGameWon}),Object(i.jsx)(C,{isGameActive:t.isGameActive})]})}),A=(n(45),{UNTOUCHED:{state:"untouched",x:0,y:-39},EMPTY:{state:"empty",x:0,y:-23},FLAGGED:{state:"flag",x:-16,y:-39},UNKNOWN:{state:"unknown",x:-80,y:-39},EXPLODED:{state:"exploded",x:-32,y:-39}}),B=function(e){e.id;var t=e.cell,n=p(),c=n.checkCellCB,s=n.setFlagStateCB;var a={backgroundPositionX:function(){switch(t.state){case w.states.untouched:case w.states.flagged:case w.states.unknown:case w.states.exploded:return A[t.state].x}return t.isMine?-64:t.count>0?-16*t.count:0}(),backgroundPositionY:function(){switch(t.state){case w.states.untouched:case w.states.flagged:case w.states.unknown:case w.states.exploded:return A[t.state].y}return t.isMine?-39:-23}(),color:t.isMine?"red":"black"};return Object(i.jsx)("div",{className:"cell",onContextMenu:function(e){e.preventDefault(),s(t)},onClick:function(){c(t)},style:a})},D=(n(46),function(e){var t=e.width,n=(e.height,Object(h.c)((function(e){return e.game})).cells);console.log("rendering game body");var c={width:16*t};return Object(i.jsx)("div",{className:"game-body bevel-down",style:c,children:n.map((function(e,t){return Object(i.jsx)(B,{id:t,cell:e},t)}))})}),L=s.a.memo(D),S=(n(47),function(){var e=Object(h.c)((function(e){return e.game})),t=p(),n=t.initGameCB,s=(0,t.getNumMinesRemainingCB)(e.cells,e.numMines);return Object(c.useEffect)((function(){n("beginner")}),[n]),Object(i.jsxs)("div",{className:"gameboard bevel-up",children:[Object(i.jsx)(E,{game:e,numMinesRemaining:s}),Object(i.jsx)(L,{width:e.width,height:e.height})]})}),W=(n(48),function(){return Object(i.jsx)("div",{className:"home-page",children:Object(i.jsx)(S,{})})}),R=function(){return Object(i.jsx)("div",{className:"routes",children:Object(i.jsxs)(j.c,{children:[Object(i.jsx)(j.a,{path:"/about",children:Object(i.jsx)(b,{})}),Object(i.jsx)(j.a,{path:"/",children:Object(i.jsx)(W,{})})]})})},I=(n(49),function(){return Object(i.jsx)("footer",{className:"footer",children:"ReactSweeper\u2122 \xa9 2020 B-Nazty, Inc."})});n(50),n(51);var P=function(){return Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)(d,{}),Object(i.jsx)("main",{children:Object(i.jsx)(R,{})}),Object(i.jsx)(I,{})]})},U=n(12),F={cells:[],height:0,numMines:0,numMinesRemaining:0,timer:0,width:0,isGameOver:!1,isGameActive:!1,isGameWon:!1,difficultyLevel:"beginner"};var H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"init.game":return Object(v.a)(Object(v.a)(Object(v.a)({},e),t),{},{isGameOver:!1,isGameActive:!1,isGameWon:!1,difficultyLevel:t.difficultyLevel});case"game.start":return Object(v.a)(Object(v.a)({},e),{},{isGameActive:!0});case"game.won":return Object(v.a)(Object(v.a)({},e),{},{isGameActive:!1,isGameOver:!0,isGameWon:!0});case"game.over":return Object(v.a)(Object(v.a)({},e),{},{isGameOver:!0,isGameActive:!1,isGameWon:!1,cells:t.cells});case"check.cell":return Object(v.a)(Object(v.a)({},e),{},{cells:e.cells.map((function(e){return e.id===t.cellId?Object(v.a)(Object(v.a)({},e),{},{state:t.state}):e}))});case"update.cells":return Object(v.a)(Object(v.a)({},e),{},{cells:t.cells});default:return e}},X=Object(U.b)({game:H}),K=Object(U.c)(X);r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(h.a,{store:K,children:Object(i.jsx)(u.a,{children:Object(i.jsx)(P,{})})})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.491659bd.chunk.js.map